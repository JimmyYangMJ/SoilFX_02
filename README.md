
## 1 线程池

###1. 动态折线图 ：JavaFXChart
###2. NIO：CloudNIO
    2.1  发送消息 线程
    2.2  接收消息线程
###3. 定时命令：SendInterval：定时 向下位机 发送 <数据回传>命令 

----------------------
## 2. 上位机和下位机通信协议

### 上 --> 下

#### 1. 回传数据命令 

09 02 21 12 15 01 00 6f 04

### 下 --> 上

#### 1. 回传数据 

(下位机回传数据给上位机) 接收数据：16进制

0C 02 12 01 15 01 09 02 01 05 26 3d


| 帧长| 工程号|帧目的|帧源|帧类型|帧编号|帧内容| CRC  |   |   |   |   |
| :------------: | :------------: | :------------: | :------------: | :------------: | :------------: | :------------: | :------------: | :------------: | :------------: | :------------: | :------------: |
| 0C|02 |01 |12 | 01| 01 | 09 02 01 05| 26 3d  |   |   |   |
|   |   |   |   |   |   |   |   |   |   |   |   |
基站：0x01，端机：0x10~0x13

帧编号： 0x01-0xff 循环

帧内容：水势电压 + 基准电压

## 3. Socket 通信协议

### client --- > 服务器
数据采用 “，” 分割

<accept> 发送成功
<2,accept,[client_id]> 
<request> 请求连接

<shutdown> 关闭连接

<[参数个数],[参数类型],[AD],[AD_base],[水势值],[时间],> 

|编号|数据类型| 参数个数|   |   |   |   |   |
| :------------: | :------------: | :------------: | :------------: | :------------: | :------------: | :------------: | :------------: |
| 1| 电压水势数据 | 5 |   |   |   |   |

### 服务器 --- > client
<[参数个数],[参数类型],[client_id],[0/1]> 

|编号|数据类型| 参数个数| 参数  |   |   |   |   |
| :------------: | :------------: | :------------: | :------------: | :------------: | :------------: | :------------: | :------------: |
| 2| 休眠/唤醒指令 | 3 | 1唤醒 2 休眠  |   |   |   |
| 3| 数据同步 | 3 |    |   |   |   |
## 界面
![img.png](img.png)